/*------------------------------------------------------------------------------
Function:      Squirrel()
Author:        Aaron Gustafson (aaron at easy-designs dot net)
Creation Date: 2010-07-31
Version:       1.0
Homepage:      http://github.com/easy-designs/Squirrel.js
License:       MIT License (see homepage)
------------------------------------------------------------------------------*/
function Squirrel(e,m){var g,h,i=window,j="-",l="squirrelsubcache-",c=document.createElement("div"),f=function(){},n=f,b=f,a=f,d=new Date();m=m||10080;d.setMinutes(d.getMinutes()+m);d=d.toUTCString();this.version="1.0";this.active=false;this.clear=this.read=this.write=this.remove=f;function k(q,o,p){if(o<q){throw new Error(p)}}if(i.localStorage!=h){g=i.localStorage;n=function(o){o=e+j+o;return g.getItem(o)};b=function(o,p){o=e+j+o;g.setItem(o,p);return true};a=function(o){var q,p=g.length,o=o?e+j+o:e;while(p--){q=g.key(p);if(q.indexOf(o)===0){delete (g[q])}}return true};this.active=true}else{c.style.behavior="url(#default#userData)";document.body.appendChild(c);if(c.XMLDocument!=h){g=c;g.load(e);g.expires=d;n=function(o){return g.getAttribute(o)};b=function(o,p){g.setAttribute(o,p);g.save(e);return true};a=function(p){var r,p=p||false,o=g.XMLDocument.firstChild.attributes,q=o.length;while(q--){r=o[q].nodeName;if(!p||r.indexOf(p)===0){g.removeAttribute(r)}}g.save(e);return true};this.active=true}}if(this.active){this.clear=function(){var p=false,o=arguments;if(o.length==1){p=l+o[0]}return a(p)};this.read=function(){var p=arguments,o=p.length,q=p[0];k(1,o,"Squirrel.read() requires at least one argument.");if(p.length==2){q=l+q+j+p[1]}return n(q)};this.write=function(){var p=arguments,o=p.length,q=p[0],r=p[1];k(2,o,"Squirrel.write() requires at least two arguments.");if(p.length==3){q=l+q+j+p[1];r=p[2]}b(q,r);return true};this.remove=function(){var p=arguments,o=p.length,q=p[0];k(1,o,"Squirrel.remove() requires at least one argument.");if(o==2){q=l+q+j+p[1]}return a(q)}}};